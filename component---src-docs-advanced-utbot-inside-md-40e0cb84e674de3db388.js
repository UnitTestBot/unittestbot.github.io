"use strict";(self.webpackChunkunittestbot_web=self.webpackChunkunittestbot_web||[]).push([[5628],{18095:function(e,t,r){r.r(t),r.d(t,{_frontmatter:function(){return l},default:function(){return c}});var a=r(87462),o=r(63366),n=(r(15007),r(64983)),s=r(23017),i=(r(8156),["components"]),l={};void 0!==l&&l&&l===Object(l)&&Object.isExtensible(l)&&!Object.prototype.hasOwnProperty.call(l,"__filemeta")&&Object.defineProperty(l,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/docs/advanced/utbot-inside.md"}});var p={_frontmatter:l},m=s.Z;function c(e){var t=e.components,r=(0,o.Z)(e,i);return(0,n.kt)(m,(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"how-utbot-works"},"How UTBot Works"),(0,n.kt)("h2",{id:"tests-generation"},"Tests Generation"),(0,n.kt)("p",null,"The pipeline of tests generation is too long and straightforward. The most important things are described below in sequential order."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"install-vscode-plugin"},"Client")," sends request (one of ",(0,n.kt)("a",{parentName:"li",href:"generating-tests"},"types"),")\nto ",(0,n.kt)("a",{parentName:"li",href:"install-server"},"server"),".\nThe ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/testgens"},"corresponding")," object aggregates requests' information."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/blob/main/server/src/fetchers/Fetcher.cpp"},"Fetcher")," fetches types, methods, global variable usages, array usages, includes for all files in request.\nIt uses ",(0,n.kt)("a",{parentName:"li",href:"https://clang.llvm.org/docs/LibTooling.html"},"LibTooling")," for parsing source code, traversing types, etc."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/clang-utils/SourceToHeaderRewriter.cpp"},"SourceToHeaderRewriter")," generates headers (.h files) based on source (.c files)."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/FeaturesFilter.cpp"},"FeaturesFilter")," filters out all methods except the ones listed in ",(0,n.kt)("a",{parentName:"li",href:"c-syntax"},"supported syntax"),"."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/Synchronizer.cpp"},"Synchronizer")," synchronizes ",(0,n.kt)("a",{parentName:"li",href:"stubs"},"stubs")," and wrappers for all files in ",(0,n.kt)("a",{parentName:"li",href:"https://clang.llvm.org/docs/JSONCompilationDatabase.html"},"compile_commands.json"),"."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/KleeGenerator.cpp"},"KleeGenerator")," generates klee files as well as source files, also builds them in ",(0,n.kt)("a",{parentName:"li",href:"https://llvm.org/docs/BitCodeFormat.html"},"bitcode")," files."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/building/Linker.cpp"},"Linker")," links bitcode files together into module."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/building/Linker.cpp"},"Linker")," writes ",(0,n.kt)("a",{parentName:"li",href:"makefiles"},"Makefiles"),"."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/KleeRunner.cpp"},"KleeRunner")," runs ",(0,n.kt)("a",{parentName:"li",href:"https://klee.github.io/"},"KLEE")," on module consecutively for each method from request."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/KleeGenerator.cpp"},"KleeGenerator")," parses output of KLEE and writes files of ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/google/googletest"},"GoogleTest"),"."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"install-server"},"Server")," sends final response to client and also transfers generated files for remote scenario.")),(0,n.kt)("h2",{id:"tests-running"},"Tests Running"),(0,n.kt)("p",null,"When user runs the tests, server performs various operations that might depend on the compiler used by the project."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"install-vscode-plugin"},"Client")," sends request to ",(0,n.kt)("a",{parentName:"li",href:"install-server"},"server"),"."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/coverage/TestRunner.cpp"},"TestRunner")," chooses coverage tool based on the compiler used by the project.\nIt is ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/coverage/GcovCoverageTool.cpp"},"GcovCoverageTool")," in case of ",(0,n.kt)("a",{parentName:"li",href:"https://gcc.gnu.org/"},"gcc")," and ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/coverage/LlvmCoverageTool.cpp"},"LlvmCoverageTool"),"  in case of ",(0,n.kt)("a",{parentName:"li",href:"https://clang.llvm.org/"},"clang"),"."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/coverage/TestRunner.cpp"},"TestRunner")," collects list of tuples (file path, suite name, test name) based on the information from the ",(0,n.kt)("a",{parentName:"li",href:"install-vscode-plugin"},"client"),"."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/coverage/TestRunner.cpp"},"TestRunner")," incrementally builds tests with instrumented options (coverage and sanitizer). To achieve this ",(0,n.kt)("a",{parentName:"li",href:"makefiles"},"Makefiles")," are used."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/coverage/TestRunner.cpp"},"TestRunner")," runs tests by calling ",(0,n.kt)("a",{parentName:"li",href:"https://www.gnu.org/software/make/manual/make.html"},"make")," on makefiles that correspond to the given sources."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/blob/main/server/src/coverage/CoverageAndResultsGenerator.cpp"},"CoverageAndResultsGenerator")," collects coverage information using previously chosen tool.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/coverage/GcovCoverageTool.cpp"},"GcovCoverageTool")," runs ",(0,n.kt)("a",{parentName:"li",href:"https://gcc.gnu.org/onlinedocs/gcc/Gcov.html"},"gcov")," on ",(0,n.kt)("a",{parentName:"li",href:"https://gcc.gnu.org/onlinedocs/gcc/Gcov-Data-Files.html"},".gcno and .gcda")," files. It provides a report in ",(0,n.kt)("inlineCode",{parentName:"li"},".json")," format."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/coverage/LlvmCoverageTool.cpp"},"LlvmCoverageTool")," runs ",(0,n.kt)("a",{parentName:"li",href:"https://llvm.org/docs/CommandGuide/llvm-profdata.html"},"llvm-profdata")," to merge several .profraw files into one.\nIt provides a report in ",(0,n.kt)("inlineCode",{parentName:"li"},".json")," format using ",(0,n.kt)("a",{parentName:"li",href:"https://llvm.org/docs/CommandGuide/llvm-cov.html"},"llvm-cov"),"."))),(0,n.kt)("li",{parentName:"ol"},"Both ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/coverage/GcovCoverageTool.cpp"},"GcovCoverageTool")," and ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/tree/main/server/src/coverage/LlvmCoverageTool.cpp"},"LlvmCoverageTool")," read  generated ",(0,n.kt)("inlineCode",{parentName:"li"},".json")," file and determine set of covered lines."),(0,n.kt)("li",{parentName:"ol"},"Finally, ",(0,n.kt)("a",{parentName:"li",href:"install-server"},"Server")," sends response to the client.")))}c&&c===Object(c)&&Object.isExtensible(c)&&!Object.prototype.hasOwnProperty.call(c,"__filemeta")&&Object.defineProperty(c,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/docs/advanced/utbot-inside.md"}}),c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-docs-advanced-utbot-inside-md-40e0cb84e674de3db388.js.map