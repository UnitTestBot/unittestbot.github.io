"use strict";(self.webpackChunkunittestbot_web=self.webpackChunkunittestbot_web||[]).push([[4199],{12790:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return l},default:function(){return d}});var a=n(87462),r=n(63366),o=(n(15007),n(64983)),s=n(23017),i=(n(8156),["components"]),l={};void 0!==l&&l&&l===Object(l)&&Object.isExtensible(l)&&!Object.prototype.hasOwnProperty.call(l,"__filemeta")&&Object.defineProperty(l,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/docs/usage/docker-free-wsl2.md"}});var p={_frontmatter:l},u=s.Z;function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"docker-free-utbot-in-wsl2"},"Docker-free UTBot in WSL2"),(0,o.kt)("p",null,"If you have a project on Windows you may like to use lightweight solution for the UTBot that is based on WSL2 virtualization approach."),(0,o.kt)("p",null,"Please, be sure that you have an ability to install the WSL2 in you Windows 10 or 11.\nMaybe you need the upgrade Windows 10 to the latest version\nand the ",(0,o.kt)("a",{parentName:"p",href:"https://support.microsoft.com/en-us/topic/windows-10-update-assistant-3550dfb2-a015-7765-12ea-fba2ac36fb3f"},"Windows 10 Upgrade Assistance"),"\nis the best way to go."),(0,o.kt)("p",null,"In the simplest variant you need to create an empty WSL2 container with recommended version of Ubuntu (currently it is ",(0,o.kt)("strong",{parentName:"p"},"Ubuntu 18.04"),")\nThat can be done by command (may need administrator privileges):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"PS C:\\Users\\user>wsl --install -d Ubuntu-18.04\n")),(0,o.kt)("p",null,"After the installation you have initial setup for WSL2 user (just for unification we recommend name it 'utbot'):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'Installing, this may take a few minutes...\nPlease create a default UNIX user account. The username does not need to match your Windows username.\nFor more information visit: https://aka.ms/wslusers\nEnter new UNIX username: utbot\nEnter new UNIX password:\nRetype new UNIX password:\npasswd: password updated successfully\nInstallation successful!\nTo run a command as administrator (user "root"), use "sudo <command>".\nSee "man sudo_root" for details.\n\nutbot@userhwlp:~$\n')),(0,o.kt)("p",null,"At this point the WSL2 initial container installation is finished.\nBy default new UTBot WSL2 container is called ",(0,o.kt)("strong",{parentName:"p"},"Ubuntu-18.04"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-PowerShell"},"PS C:\\Users\\u00663918> wsl --list --verbose\n  NAME                   STATE           VERSION\n  Ubuntu-18.04           Running         2      <---------- Newly installed WSL2 container   \n")),(0,o.kt)("p",null,"Now you need to install the UTBot server in it."),(0,o.kt)("p",null,"For the common case this step is described in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/UnitTestBot/UTBotCpp/wiki/install-server"},"install server"),"\ndocument, but this simplified WSL2 installation has some specifics and is described below."),(0,o.kt)("h2",{id:"step-by-step-utbot-server-installation-and-the-first-run"},"Step by step UTBot server installation and the first run"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Hint"),": you can skip this section by running the script from home ",(0,o.kt)("strong",{parentName:"p"},"utbot")," folder:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'#!/bin/bash\n\n#please, change UTBOT_VERSION value to the latest version from https://github.com/UnitTestBot/UTBotCpp/releases\nexport UTBOT_VERSION="1.0.167" \n\nmkdir utbotcpp\ncd utbotcpp\nwget https://github.com/UnitTestBot/UTBotCpp/releases/download/v$UTBOT_VERSION/utbot-release-$UTBOT_VERSION.zip\nsudo apt-get install unzip\nunzip utbot-release-$UTBOT_VERSION.zip\ntar -xvzf utbot_distr.tar.gz\nchmod +x unpack_and_run_utbot.sh \nsudo ./unpack_and_run_utbot.sh\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"You need to check the latest version of UTBot from ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/releases"},"release artifacts"),".\nPlease, find the URL of artifacts that is taken from ",(0,o.kt)("strong",{parentName:"li"},"Assets"),". As an example: ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/UnitTestBot/UTBotCpp/releases/download/v1.0.167/utbot-release-1.0.167.zip"},"https://github.com/UnitTestBot/UTBotCpp/releases/download/v1.0.167/utbot-release-1.0.167.zip"),'.\nHere "1.0.167" is the latest version at the time of writing.'),(0,o.kt)("li",{parentName:"ul"},"Make the directory for UTBotCpp ",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"utbot@userhwlp:~$ mkdir utbotcpp \n"))),(0,o.kt)("li",{parentName:"ul"},"Go into created directory utbotcpp",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"utbot@userhwlp:~$ cd utbotcpp \n"))),(0,o.kt)("li",{parentName:"ul"},"Download archive from release artifacts",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"utbot@userhwlp:~/utbotcpp$ wget https://github.com/UnitTestBot/UTBotCpp/releases/download/v1.0.167/utbot-release-1.0.167.zip\n"))),(0,o.kt)("li",{parentName:"ul"},"Unarchive downloaded zip (install unzip ",(0,o.kt)("inlineCode",{parentName:"li"},"sudo apt-get install unzip")," first!)",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"utbot@userhwlp:~/utbotcpp$ unzip utbot-release-1.0.167.zip\n"))),(0,o.kt)("li",{parentName:"ul"},"Unpack tar ",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"utbot@userhwlp:~/utbotcpp$ tar -xvzf utbot_distr.tar.gz\n"))),(0,o.kt)("li",{parentName:"ul"},"Install and run server under the ",(0,o.kt)("inlineCode",{parentName:"li"},"root"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"utbot@userhwlp:~/utbotcpp$ sudo chmod +x unpack_and_run_utbot.sh && ./unpack_and_run_utbot.sh\n")),(0,o.kt)("strong",{parentName:"li"},"NB!")," UTBot need to be run under the root to get an access to Windows File System with necessary privileges. ")),(0,o.kt)("p",null,"To run correctly UTBot server needs well-configured build-related and ",(0,o.kt)("inlineCode",{parentName:"p"},"gcc-9")," packages.\nYou can do it by running the following script:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"#!/bin/bash\n\nsudo apt-get update -y\nsudo apt-get upgrade -y\nsudo apt-get dist-upgrade -y\nsudo apt-get install build-essential software-properties-common -y\nsudo add-apt-repository ppa:ubuntu-toolchain-r/test -y\nsudo apt-get update -y\nsudo apt-get install gcc-9 g++-9 -y\nsudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 60 --slave /usr/bin/g++ g++ /usr/bin/g++-9\nsudo update-alternatives --config gcc\n")),(0,o.kt)("h2",{id:"restart-utbot-server"},"Restart UTBot server"),(0,o.kt)("p",null,"There are several ways to restart the UTBot server:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Restart UTBot server only. You can do it by the command from home directory of ",(0,o.kt)("inlineCode",{parentName:"li"},"utbot")," user inside WSL2 container:",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"utbot@userhwlp:~$ sudo ~/utbotcpp/utbot_distr/utbot_server_restart.sh\n"))),(0,o.kt)("li",{parentName:"ul"},"Restart WSL2 subsystem from PowerShell command line",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-PowerShell"},"PS C:\\Users\\u00663918> wsl --terminate Ubuntu-18.04\n")),"After that you need to run WSL2 container ",(0,o.kt)("strong",{parentName:"li"},"Ubuntu-18.04")," again and start the server by internal script",(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"utbot@userhwlp:~$ sudo ~/utbotcpp/utbot_distr/utbot_server_restart.sh\n")))),(0,o.kt)("h2",{id:"vc-utbot-plugin-setup"},"VC UTBot plugin setup"),(0,o.kt)("p",null,"Due to single FS project organization you don't need synchronize the project source on Windows with WSL2 UTBot server.\nAs a result you don't need SFTP plugin.\nWhile mandatory setup of UTBot plugin (Run UTBot: Quickstart wizard) you need "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Connection")," step:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Type ",(0,o.kt)("inlineCode",{parentName:"li"},"localhost")," in ",(0,o.kt)("strong",{parentName:"li"},"Host"),"  field (",(0,o.kt)("strong",{parentName:"li"},"NB!")," not ",(0,o.kt)("inlineCode",{parentName:"li"},"127.0.0.1"),", not a temporary IP address that will change each time the WSL2 container is started)"),(0,o.kt)("li",{parentName:"ul"},"Type ",(0,o.kt)("inlineCode",{parentName:"li"},"2121")," in ",(0,o.kt)("strong",{parentName:"li"},"Port"),"  field"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Remote Path")," step:\nType ",(0,o.kt)("inlineCode",{parentName:"li"},"/mnt/d/dev/c-example-my-vc")," for windows project from  ",(0,o.kt)("inlineCode",{parentName:"li"},"d:\\dev\\c-example-my-vc")," in ",(0,o.kt)("strong",{parentName:"li"},"Remote Path")," field")),(0,o.kt)("p",null,"That is all!\nGood luck!"))}d&&d===Object(d)&&Object.isExtensible(d)&&!Object.prototype.hasOwnProperty.call(d,"__filemeta")&&Object.defineProperty(d,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/docs/usage/docker-free-wsl2.md"}}),d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-docs-usage-docker-free-wsl-2-md-331757fb78cc0934e336.js.map